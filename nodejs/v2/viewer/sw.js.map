{"version":3,"file":"sw.js","sources":["../src/sw.ts"],"sourcesContent":["import { version as appVersion } from '../package.json';\n\n// export default null\ndeclare let self: ServiceWorkerGlobalScope;\n\nconst cacheName = `superSplat-v${appVersion}`;\n\nconst cacheUrls = [\n    './',\n    './index.css',\n    './index.html',\n    './index.js',\n    './index.js.map',\n    './jszip.js',\n    './manifest.json',\n    './static/icons/logo-192.png',\n    './static/icons/logo-512.png',\n    './static/images/screenshot-narrow.jpg',\n    './static/images/screenshot-wide.jpg',\n    './static/lib/lodepng/lodepng.js',\n    './static/lib/lodepng/lodepng.wasm',\n    './static/lib/webp/webp.mjs',\n    './static/lib/webp/webp.wasm',\n    './static/locales/de.json',\n    './static/locales/en.json',\n    './static/locales/fr.json',\n    './static/locales/ja.json',\n    './static/locales/ko.json',\n    './static/locales/zh-CN.json'\n];\n\nself.addEventListener('install', (event) => {\n    // console.log(`installing v${appVersion}`);\n\n    // create cache for current version\n    event.waitUntil(\n        caches.open(cacheName)\n        .then((cache) => {\n            cache.addAll(cacheUrls);\n        })\n    );\n});\n\nself.addEventListener('activate', () => {\n    // console.log(`activating v${appVersion}`);\n\n    // delete the old caches once this one is activated\n    caches.keys().then((names) => {\n        for (const name of names) {\n            if (name !== cacheName) {\n                caches.delete(name);\n            }\n        }\n    });\n});\n\n// self.addEventListener('fetch', (event) => {\n//     event.respondWith(\n//         caches.match(event.request)\n//         .then(response => response ?? fetch(event.request))\n//     );\n// });\n\n\n// Ê∑ªÂä† ‚ÄúÁΩëÁªú‰ºòÂÖà‚ÄùÁöÑÁºìÂ≠òÁ≠ñÁï•\n// ‰ºòÂÖàÂ∞ùËØï‰ªéÁΩëÁªúËé∑ÂèñËµÑÊ∫êÔºõÁΩëÁªúÊàêÂäüÂ∞±Êõ¥Êñ∞ÁºìÂ≠òÔºõÁΩëÁªúÂ§±Ë¥•Â∞±‰ªéÁºìÂ≠ò‰∏≠ËØªÂèñ„ÄÇ\nself.addEventListener('fetch', (event) => {\n    event.respondWith(\n        fetch(event.request)\n            .then((networkResponse) => {\n                // ‚úÖ Êõ¥Êñ∞ÁºìÂ≠òÂâØÊú¨\n                return caches.open(cacheName).then((cache) => {\n                    cache.put(event.request, networkResponse.clone());\n                    return networkResponse;\n                });\n            })\n            .catch(() => {\n                // üîÅ ÁΩëÁªúÂ§±Ë¥•Êó∂Áî®ÁºìÂ≠ò\n                return caches.match(event.request);\n            })\n    );\n});\n"],"names":["appVersion"],"mappings":";;AAKA,MAAM,SAAS,GAAG,CAAA,YAAA,EAAeA,OAAU,EAAE;AAE7C,MAAM,SAAS,GAAG;IACd,IAAI;IACJ,aAAa;IACb,cAAc;IACd,YAAY;IACZ,gBAAgB;IAChB,YAAY;IACZ,iBAAiB;IACjB,6BAA6B;IAC7B,6BAA6B;IAC7B,uCAAuC;IACvC,qCAAqC;IACrC,iCAAiC;IACjC,mCAAmC;IACnC,4BAA4B;IAC5B,6BAA6B;IAC7B,0BAA0B;IAC1B,0BAA0B;IAC1B,0BAA0B;IAC1B,0BAA0B;IAC1B,0BAA0B;IAC1B;CACH;AAED,IAAI,CAAC,gBAAgB,CAAC,SAAS,EAAE,CAAC,KAAK,KAAI;;;IAIvC,KAAK,CAAC,SAAS,CACX,MAAM,CAAC,IAAI,CAAC,SAAS;AACpB,SAAA,IAAI,CAAC,CAAC,KAAK,KAAI;AACZ,QAAA,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC;IAC3B,CAAC,CAAC,CACL;AACL,CAAC,CAAC;AAEF,IAAI,CAAC,gBAAgB,CAAC,UAAU,EAAE,MAAK;;;IAInC,MAAM,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,KAAK,KAAI;AACzB,QAAA,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;AACtB,YAAA,IAAI,IAAI,KAAK,SAAS,EAAE;AACpB,gBAAA,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC;YACvB;QACJ;AACJ,IAAA,CAAC,CAAC;AACN,CAAC,CAAC;AAEF;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,KAAK,KAAI;IACrC,KAAK,CAAC,WAAW,CACb,KAAK,CAAC,KAAK,CAAC,OAAO;AACd,SAAA,IAAI,CAAC,CAAC,eAAe,KAAI;;AAEtB,QAAA,OAAO,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,KAAI;AACzC,YAAA,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,OAAO,EAAE,eAAe,CAAC,KAAK,EAAE,CAAC;AACjD,YAAA,OAAO,eAAe;AAC1B,QAAA,CAAC,CAAC;AACN,IAAA,CAAC;SACA,KAAK,CAAC,MAAK;;QAER,OAAO,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,OAAO,CAAC;IACtC,CAAC,CAAC,CACT;AACL,CAAC,CAAC"}